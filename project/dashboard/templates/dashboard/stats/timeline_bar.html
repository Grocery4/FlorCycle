{% load i18n %}
{% if timeline_data.has_cycle %} 

<div class="timeline-container">
  <div class="timeline-header">
    <h3>{% trans "Current Cycle" %}</h3>
    <p class="cycle-dates">{{ timeline_data.cycle_start|date:"M d" }} â€” {{ timeline_data.cycle_end|date:"M d, Y" }}</p>
  </div>

  <div class="timeline-bar-wrapper">
    <div class="timeline-bar">
      <!-- Menstruation phase -->
      <div
        class="phase menstruation-phase"
        style="left: {{ timeline_data.menstruation.start_percent|stringformat:'.2f' }}%; width: {{ timeline_data.menstruation.width_percent|stringformat:'.2f' }}%;">
      </div>

      <!-- Ovulation phase -->
      <div
        class="phase ovulation-phase"
        style="left: {{ timeline_data.ovulation.start_percent|stringformat:'.2f' }}%; width: {{ timeline_data.ovulation.width_percent|stringformat:'.2f' }}%;"
      ></div>

      <!-- Current day marker (only if within cycle) -->
      {% if timeline_data.show_markers and timeline_data.current_day_percent is not None %}
      <div
        class="marker current-day-marker"
        style="left: {{ timeline_data.current_day_percent|stringformat:'.2f' }}%;"
        title="{% trans 'Today' %}"
      ></div>
      {% endif %}

      <!-- Probable ovulation day marker (only if within cycle) -->
      {% if timeline_data.show_markers %}
      <div
        class="marker probable-ovulation-marker"
        style="left: {{ timeline_data.ovulation.probable_percent|stringformat:'.2f' }}%;"
        title="{% trans 'Probable ovulation day' %}">
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Legend -->
  <div class="timeline-legend">
    <div class="legend-item">
      <span class="legend-color menstruation"></span>
      <span class="legend-label">{% trans "Menstruation" %} ({{ timeline_data.menstruation.duration }} days)</span>
    </div>
    <div class="legend-item">
      <span class="legend-color ovulation"></span>
      <span class="legend-label">{% trans "Ovulation Window" %} ({{ timeline_data.ovulation.duration }} days)</span>
    </div>
    {% if timeline_data.show_markers %}
    <div class="legend-item">
      <span class="legend-marker current-day"></span>
      <span class="legend-label">{% trans "Today" %}</span>
    </div>
    <div class="legend-item">
      <span class="legend-marker probable-ovulation"></span>
      <span class="legend-label">{% trans "Probable ovulation" %}</span>
    </div>
    {% endif %}
  </div>
</div>
{% else %}
  <div class="timeline-container no-cycle">
    <p>{% trans "No cycle data available. Log your menstruation to see the timeline." %}</p>
  </div>
{% endif %}
