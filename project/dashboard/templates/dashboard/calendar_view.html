{% extends "base.html" %} 
{% load static %} 
{% load i18n %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'dashboard/css/calendar_view.css' %}" />
{% endblock extra_head %} 
{% block title %}{% trans "Calendar" %}{% endblock title %} 

{% block content %}
<div
  class="calendar-page-container"
  data-ajax-url="{% url 'dashboard:ajax_load_log' %}"
  data-add-log-url="{% url 'dashboard:add_log' %}"
  data-csrf-token="{{ csrf_token }}"
  data-language-code="{{ LANGUAGE_CODE }}"
>
  {% include "dashboard/subpage_topbar.html" %}

  <div class="calendar-wrapper">
    <div class="calendar-list">
      <div class="calendar-nav-header">
        <a href="?date={{ prev_date }}" class="nav-btn">&laquo; {% trans "Prev" %}</a>
        <a href="?date={{ next_date }}" class="nav-btn">{% trans "Next" %} &raquo;</a>
      </div>
      {% for calendar in calendars %}
      <div class="month-container">{{ calendar|safe }}</div>
      {% endfor %}
    </div>

    <div class="daily-view-sidebar" id="daily-view-sidebar">
      <div class="daily-view-header">
        <h3 id="selected-date-display" style="text-transform: capitalize">{% trans "Select a date" %}</h3>
      </div>

      <div id="daily-view-content" class="daily-view-content hidden">
        <div class="cycle-status-indicators">
          <span id="period-indicator" class="indicator period hidden">{% trans "Period" %}</span>
          <span id="ovulation-indicator" class="indicator ovulation hidden">{% trans "Ovulation" %}</span
          >
        </div>

        <div class="log-details-form">
          <form
            id="sidebar-log-form"
            method="post"
            action="{% url 'dashboard:add_log' %}"
          >
            {% csrf_token %}
            <input type="hidden" name="date" id="selected-date-input" />

            <div class="log-group">
              <h4>{% trans "General" %}</h4>
              <div class="form-field">
                {{ dl_form.note.label_tag }} {{ dl_form.note }}
              </div>
              <div class="form-field">
                {{ dl_form.flow.label_tag }} {{ dl_form.flow }}
              </div>
              <div class="form-field">
                {{ dl_form.weight.label_tag }} {{ dl_form.weight }}
              </div>
              <div class="form-field">
                {{ dl_form.temperature.label_tag }} {{ dl_form.temperature }}
              </div>
              <div class="form-field">
                {{ dl_form.ovulation_test.label_tag }} {{ dl_form.ovulation_test }}
              </div>
            </div>

            <div class="log-group">
              <h4>{{ dl_form.symptoms.label }}</h4>
              <div class="checkbox-group symptoms-group">
                {{ dl_form.symptoms }}
              </div>
            </div>

            <div class="log-group">
              <h4>{{ dl_form.moods.label }}</h4>
              <div class="checkbox-group moods-group">{{ dl_form.moods }}</div>
            </div>

            <div class="log-group">
              <h4>{{ dl_form.medications.label }}</h4>
              <div class="checkbox-group medications-group">
                {{ dl_form.medications }}
              </div>
            </div>

            <div class="log-group">
              <h4>{% trans "Intercourse" %}</h4>
              <div class="form-field">
                {{ il_form.quantity.label_tag }} {{ il_form.quantity }}
              </div>
              <div class="form-field checkbox-field">
                {{ il_form.protected.label_tag }} {{ il_form.protected }}
              </div>
              <div class="form-field checkbox-field">
                {{ il_form.orgasm.label_tag }} {{ il_form.orgasm }}
              </div>
            </div>

            {% if not is_partner %}
              <div class="form-actions">
                <button type="button" id="sidebar-save-btn" class="save-btn">
                  {% trans "Save Log" %}
                </button>
              </div>
            {% endif %}
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{% static 'dashboard/js/calendar_view.js' %}"></script>

{% endblock content %}
