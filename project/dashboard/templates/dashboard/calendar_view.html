{% extends "base.html" %} 
{% load static %} 
{% load i18n %}

{% block extra_head %}
  <link rel="stylesheet" href="{% static 'dashboard/css/calendar_view.css' %}" />
{% endblock extra_head %} 
{% block title %}{% trans "Calendar" %}{% endblock title %} 

{% block content %}
<div
  class="calendar-page-container"
  data-ajax-url="{% url 'dashboard:ajax_load_log' %}"
  data-add-log-url="{% url 'dashboard:add_log' %}"
  data-csrf-token="{{ csrf_token }}"
  data-language-code="{{ LANGUAGE_CODE }}"
>
  {% include "dashboard/subpage_topbar.html" %}

  <div class="calendar-wrapper">
    <div class="calendar-list">
      <div class="calendar-nav-header">
        <a href="?date={{ prev_date }}" class="nav-btn">&laquo; {% trans "Prev" %}</a>
        <a href="?date={{ next_date }}" class="nav-btn">{% trans "Next" %} &raquo;</a>
      </div>
      {% for calendar in calendars %}
      <div class="month-container">{{ calendar|safe }}</div>
      {% endfor %}
    </div>

    <div class="daily-view-sidebar" id="daily-view-sidebar">
      <div class="daily-view-header">
        <h3 id="selected-date-display" style="text-transform: capitalize;">{% trans "Select a date" %}</h3>
      </div>

      <div id="daily-view-content" class="daily-view-content hidden">
        <div class="cycle-status-indicators">
          <span id="period-indicator" class="indicator period hidden"
            >{% trans "Period" %}</span
          >
          <span id="ovulation-indicator" class="indicator ovulation hidden"
            >{% trans "Ovulation" %}</span
          >
        </div>

        <div class="log-details">
          <h4>{% trans "Log Details" %}</h4>
          <div id="log-data">
            <div class="log-item">
              <p><strong>{% trans "Notes" %}</strong> <span id="log-note"></span></p>
            </div>
            <div class="log-item">
              <p><strong>{% trans "Flow" %}</strong> <span id="log-flow"></span></p>
            </div>
            <div class="log-item">
              <p><strong>{% trans "Weight" %}</strong> <span id="log-weight"></span></p>
            </div>
            <div class="log-item">
              <p><strong>{% trans "Temp" %}</strong> <span id="log-temp"></span></p>
            </div>
            <div class="log-item">
              <p>
                <strong>{% trans "Ovulation Test" %}</strong>
                <span id="log-ovulation-test"></span>
              </p>
            </div>

            <div class="log-group">
              <h5>{% trans "Symptoms" %}</h5>
              <ul id="log-symptoms"></ul>
            </div>
            <div class="log-group">
              <h5>{% trans "Moods" %}</h5>
              <ul id="log-moods"></ul>
            </div>
            <div class="log-group">
              <h5>{% trans "Medications" %}</h5>
              <ul id="log-medications"></ul>
            </div>

            <div class="log-group">
              <h5>{% trans "Intercourse" %}</h5>
              <p><strong>{% trans "Quantity" %}</strong> <span id="log-quantity"></span></p>
              <p>
                <strong>{% trans "Protected" %}</strong> <span id="log-protected"></span>
              </p>
              <p><strong>{% trans "Orgasm" %}</strong> <span id="log-orgasm"></span></p>
            </div>
          </div>
        </div>

        <div id="no-log-data" class="no-log-data hidden">
          <p>{% trans "No log entry for this day." %}</p>
        </div>

        {% if not is_partner %}
        <a
          href="{% url 'dashboard:add_log' %}"
          class="add-log-btn"
          id="add-log-btn"
          >{% trans "Edit Log" %}</a
        >
        {% endif %}
      </div>
    </div>
  </div>
</div>

<script src="{% static 'dashboard/js/calendar_view.js' %}"></script>

{% endblock content %}
